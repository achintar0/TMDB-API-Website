{% extends 'movies/base.html' %}
{% load static %}
{% csrf_token %}

{% block content %}
<head>
    <link rel="stylesheet" href="{% static 'styles/item-slider.css' %}">
</head>
<body>
    <section class="item-slider">
        <h2 class="item-slider-type">Trending Movies this Week</h2>
        <button class="pre-btn"><img src="{% static 'icons/back.png'%}"></button>
        <button class="nxt-btn"><img src="{% static 'icons/next.png'%}"></button>
        <div class="item-slider-container">
            {% if trendingMovies %}
                {% for movie in trendingMovies %}
            <div class="item-card">       
                <a  class="item-image-container">
                    
                    {% if movie.vote_average == 0 %}
                    <span class="item-rating-tag">N/A</span>
                    {% elif movie.vote_average > 0 and movie.vote_average < 5 %}
                        <span class="item-rating-tag" style="background: linear-gradient(0deg, rgb(255, 87, 87) 0%, rgb(255, 255, 255) 100%)">{{movie.vote_average|floatformat:1}}</span>
                    {% elif movie.vote_average >= 5 and movie.vote_average < 7 %}
                        <span class="item-rating-tag" style="background: linear-gradient(0deg, rgb(255, 219, 39) 0%, rgb(255, 255, 255) 100%)">{{movie.vote_average|floatformat:1}}</span>
                    {% else %}
                        <span class="item-rating-tag" style="background: linear-gradient(0deg, rgb(151, 255, 95) 0%, rgb(255, 255, 255) 100%)">{{movie.vote_average|floatformat:1}}</span>
                    {% endif %}
                    <img src="{{movie.poster_url}}" class="item-poster" alt="{{movie.title}}">
                    <button class="watchlist-add-btn" data-item-id="{{movie.item_id}}" data-media-type="{{movie.media_type}}">
                        <img src="{% static 'icons/bookmark.png' %}" alt="">
                    </button>
                </a>
                <div class="item-info">
                    <h2 class="item-name">{{movie.title}}</h2>
                    <span class="item-year">{{movie.release_date}}</span>
                    <button class="watch-trailer-btn">Trailer</button>
                </div>
            </div>
                {% endfor %} 
            {% else %}
            <p>No results found.</p>
            {% endif%}
        </div>
    </section>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{% static 'scripts/item-slider.js'%}"></script>
    <script src="{% static 'scripts/watchlist.js'%}"></script>
    <script>
        const csrfToken = "{{ csrf_token }}";
    </script>


</body>
{% endblock %}
    

    